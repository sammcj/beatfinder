# Last.fm API Configuration
# Get your API key at: https://www.last.fm/api/account/create
LASTFM_API_KEY=your_api_key_here

# Apple Music Web API Tokens (Optional - for creating playlists)
# Extract these from browser when logged into https://music.apple.com
# Dev Token: Found if you search in the network requests tab of the browser dev tools
# Media User Token: Found in browser cookies/storage (right click -> inspect -> storage)
# Note: These tokens expire periodically and need to be refreshed from browser
APPLE_MUSIC_WEB_DEV_TOKEN=
APPLE_MUSIC_WEB_MEDIA_USER_TOKEN=

# Recommendation Settings
MAX_RECOMMENDATIONS=40

# Artist Classification Thresholds
# These settings control which artists are filtered from recommendations ("known")
# and which are used to build your taste profile ("loved")

# KNOWN ARTISTS (filtered from recommendations):
# Artists matching either of these criteria won't be recommended (you already know them)

# Minimum plays threshold
KNOWN_ARTIST_MIN_PLAY_COUNT=2

# OR: Minimum tracks in library threshold
# Useful for streaming users where play counts may be 0 but you have many tracks added
KNOWN_ARTIST_MIN_TRACKS=3

# LOVED ARTISTS (used for building taste profile):
# Artists that match any of these criteria are used to find similar artists

# High play count alone qualifies as "loved"
LOVED_PLAY_COUNT_THRESHOLD=20

# OR: High rating with minimum plays qualifies as "loved"
# Minimum star rating (1-5 scale) of artist's highest-rated track (in Apple music "loved" is 4 or 5 stars)
LOVED_MIN_TRACK_RATING=4
# Minimum total plays across all tracks by that artist
LOVED_MIN_ARTIST_PLAYS=10

# Cache Settings
CACHE_EXPIRY_DAYS=60
# How long to keep cached recommendations (in days)
# Recommendations are automatically regenerated if cache expires or rarity preference changes
RECOMMENDATIONS_CACHE_EXPIRY_DAYS=7

# Performance Settings
# Number of concurrent API requests (higher = faster but more aggressive, default: 10)
MAX_CONCURRENT_REQUESTS=20

# Maximum API requests per second (default: 5, Last.fm limit is 5 req/sec)
MAX_REQUESTS_PER_SECOND=5

# Rarity Preference: 1-15 scale
# 1 = most popular artists, 15 = most obscure/underground artists, 7 = balanced (default)
# 1-5: Mainstream, 6-10: Balanced, 11-15: Very obscure
RARITY_PREFERENCE=8

# Advanced Recommendation Features (Optional)
# Tag Similarity: Match recommendations to your music taste profile (true/false)
ENABLE_TAG_SIMILARITY=false

# Play Frequency Weighting: Prioritise recommendations from your most-played artists (true/false)
ENABLE_PLAY_FREQUENCY_WEIGHTING=false

# Time Filter: Only consider artists played in last N months (0 = all time)
LAST_MONTHS_FILTER=0

# Tag Ignore List: Comma-separated list of tags to ignore in similarity scoring
# Example: pop,christmas,instrumental
# These tags won't influence recommendations (but won't ignore artists with these tags)
TAG_IGNORE_LIST=pop,popular,christmas,instrumental,soundtrack,classical,live,acoustic,american,singer-songwriter,experimental,female vocalists,male vocalists,alternative,indie,indie rock

# Apple Music Integration (Optional)
# Scrape direct song links from Apple Music's web catalogue
# Generates clickable links to songs in recommendations.md
# Note: Automatic playlist import doesn't work for streaming tracks -
# use the song links to manually add tracks you like
CREATE_APPLE_MUSIC_PLAYLIST=true

# Number of songs to scrape per recommended artist (generates direct song links in output)
PLAYLIST_SONGS_PER_ARTIST=3

# Parallel scraping batch size for Apple Music catalogue search (default: 5)
# Higher values = faster but more resource intensive
APPLE_MUSIC_SCRAPE_BATCH_SIZE=5

# HTML VISUALISATION (Optional)
# Generate an interactive HTML visualisation showing recommendation connections
GENERATE_HTML_VISUALISATION=false

# Scoring Weights (only used when advanced features enabled, must sum to 1.0)
# Frequency: How many of your artists recommend this
# Tag Overlap: How well tags match your music profile
# Match Score: Last.fm's similarity rating
# Rarity: Artist obscurity (inverse of listener count)
SCORING_FREQUENCY_WEIGHT=0.3
SCORING_TAG_OVERLAP_WEIGHT=0.3
SCORING_MATCH_WEIGHT=0.2
SCORING_RARITY_WEIGHT=0.2
