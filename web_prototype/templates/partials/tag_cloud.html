{% if enabled %}
    <div class="flex flex-wrap gap-2">
        {% for tag, count in tag_profile.items()|sort(attribute='1', reverse=True) %}
            {% if tag in blacklisted_tags %}
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 line-through opacity-50">
                    {{ tag }}
                </span>
            {% else %}
                {% set size_class = 'text-lg' if count > 20 else 'text-base' if count > 15 else 'text-sm' if count > 10 else 'text-xs' %}
                {% set opacity_class = 'opacity-100' if count > 15 else 'opacity-80' if count > 10 else 'opacity-60' %}
                <span class="inline-flex items-center px-3 py-1 rounded-full {{ size_class }} font-medium bg-primary-100 text-primary-700 {{ opacity_class }}">
                    {{ tag }}
                    <span class="ml-1.5 text-xs opacity-75">{{ count }}</span>
                </span>
            {% endif %}
        {% endfor %}

        {% for tag in blacklisted_tags %}
            {% if tag not in tag_profile.keys() %}
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 line-through opacity-50">
                    {{ tag }}
                </span>
            {% endif %}
        {% endfor %}
    </div>

    <div class="mt-4 pt-4 border-t border-slate-200">
        <div class="flex items-start gap-2 text-xs">
            <div class="flex-1">
                <div class="flex items-center gap-2 mb-1">
                    <div class="w-3 h-3 rounded-full bg-primary-100"></div>
                    <span class="text-slate-600">Active tags (size = frequency)</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-100"></div>
                    <span class="text-slate-600">Blacklisted (filtered out)</span>
                </div>
            </div>
        </div>
    </div>
{% else %}
    <div class="text-center py-8 text-slate-400">
        <svg class="mx-auto h-12 w-12 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
        </svg>
        <p class="text-sm">Tag similarity disabled</p>
        <p class="text-xs mt-1">Enable above to see your taste profile tags</p>
    </div>
{% endif %}
